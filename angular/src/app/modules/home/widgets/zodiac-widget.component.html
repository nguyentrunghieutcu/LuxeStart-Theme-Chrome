<div class="relative group transition-all duration-300">
    <!-- Background with mystical gradient and blur -->
    <div
    [class]="isSquareLayout ? 
      'w-[200px] h-[200px] origin-top-left' : 
      'w-[320px] h-[200px] origin-top-left'"
    [ngClass]="isDarkMode ? [
      'bg-gradient-to-br from-slate-900/80 via-indigo-900/50 to-purple-900/60',
      'text-white',
      'border-white/5'
    ] : [
      'bg-gradient-to-br from-white/90 via-indigo-50/50 to-purple-100/60',
      'text-slate-800',
      'border-slate-200'
    ]"
    class="relative backdrop-blur-xl rounded-xl p-4 shadow-lg border transform transition-all duration-500 ease-in-out"
>
        <!-- Mystical overlay effects -->
        <div
            [ngClass]="isDarkMode ? 'from-purple-400/5' : 'from-purple-200/20'"
            class="absolute inset-0 rounded-xl bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] via-transparent to-transparent"
        >
        </div>
        <div
            [ngClass]="isDarkMode ? 
      'from-indigo-500/10 via-purple-500/10 to-pink-500/10' : 
      'from-indigo-200/20 via-purple-200/20 to-pink-200/20'"
            class="absolute -inset-[1px] rounded-xl bg-gradient-to-r blur-sm"
        >
        </div>
        <!-- Star particles background -->
        <div class="absolute inset-0 rounded-xl overflow-hidden">
            <div
                [ngClass]="isDarkMode ? 'bg-white/20' : 'bg-indigo-300/30'"
                class="absolute w-1 h-1 rounded-full animate-pulse"
                style="top: 10%; left: 20%"
            ></div>
            <div
                [ngClass]="isDarkMode ? 'bg-white/30' : 'bg-purple-300/40'"
                class="absolute w-1 h-1 rounded-full animate-pulse"
                style="top: 30%; left: 80%"
            ></div>
            <div
                [ngClass]="isDarkMode ? 'bg-white/20' : 'bg-indigo-300/30'"
                class="absolute w-1 h-1 rounded-full animate-pulse"
                style="top: 70%; left: 40%"
            ></div>
            <div
                [ngClass]="isDarkMode ? 'bg-white/40' : 'bg-purple-300/50'"
                class="absolute w-[2px] h-[2px] rounded-full animate-pulse"
                style="top: 50%; left: 90%"
            ></div>
        </div>

        <!-- Main content container -->
        <div class="relative z-10 flex flex-col h-full gap-3">
            <!-- Layout Toggle -->
            <div class="absolute top-0 right-0">
                <button
                    (click)="toggleLayout()"
                    class="text-white/70 hover:text-white hover:bg-white/10 rounded-full p-1.5 transition-all duration-300"
                >
                    <lucide-icon
                        [name]="isSquareLayout ? 'Minimize2' : 'Maximize2'"
                        class="w-4 h-4"
                    ></lucide-icon>
                </button>
            </div>

            <!-- Rest of the content structure remains the same, updating styles -->
            <div [class]="isSquareLayout ? 'flex-1 flex flex-col' : ''">
                <!-- Date with enhanced styling -->
                <h3
                    class="text-white text-xl font-semibold tracking-wide"
                    [class.mb-4]="isSquareLayout"
                >
                    Hôm nay, {{ today | date:'d MMM' }}
                </h3>

                <!-- Update form inputs and buttons with mystical styling -->
                <div
                    *ngIf="!hasZodiacInfo; else zodiacContent"
                    class="flex flex-col items-center justify-center gap-4 py-1"
                >
                    <div
                        *ngIf="!showSetupForm"
                        class="text-center"
                    >
                        <p
                            [ngClass]="isDarkMode ? 'text-white/80' : 'text-slate-600'"
                            class="text-xs mb-4 italic"
                        >
                            Khám phá vận mệnh của bạn qua chiêm tinh học
                        </p>
                        <button
                            (click)="openZodiacSelector()"
                            class="px-6 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white rounded-full transition-all duration-300 shadow-lg shadow-purple-500/20"
                        >
                            Bắt đầu
                        </button>
                    </div>

                    <!-- Enhanced form styling -->
                    <!-- <form
                        *ngIf="showSetupForm"
                        [formGroup]="setupForm"
                        (ngSubmit)="onSubmitSetup()"
                        class="w-full flex flex-col gap-4"
                    >
                        <div class="flex flex-col gap-2">
                            <label
                                [ngClass]="isDarkMode ? 'text-white/80' : 'text-slate-600'"
                                class="text-sm"
                            >
                                Họ và tên
                            </label>
                            <input
                                type="text"
                                formControlName="name"
                                [ngClass]="isDarkMode ? 
                          'bg-white/5 text-white border-white/10 focus:border-purple-500' : 
                          'bg-slate-100 text-slate-800 border-slate-200 focus:border-purple-400'"
                                class="px-4 py-2 rounded-lg border outline-none backdrop-blur-xl transition-all duration-300"
                            >
                        </div>

                        <div class="flex flex-col gap-2">
                            <label class="text-white/80 text-sm">Ngày sinh</label>
                            <input
                                type="date"
                                formControlName="birthDate"
                                class="px-4 py-2 rounded-lg bg-white/5 text-white border border-white/10 focus:border-purple-500 outline-none backdrop-blur-xl transition-all duration-300"
                            >
                        </div>

                        <button
                            type="submit"
                            class="mt-2 px-6 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white rounded-full transition-all duration-300 shadow-lg shadow-purple-500/20"
                            [disabled]="setupForm.invalid"
                        >
                            Xác nhận
                        </button>
                    </form> -->
                </div>

                <!-- Enhanced zodiac content styling -->
                <ng-template #zodiacContent>
                    <div [class]="isSquareLayout ? 'flex-1 flex flex-col items-center justify-center gap-6' : 'flex items-start gap-4'">
                        <div class="relative group">
                            <div class="absolute -inset-2 bg-gradient-to-r from-purple-500/20 to-indigo-500/20 rounded-full blur-lg group-hover:opacity-75 transition-opacity duration-300"></div>
                            <img
                                *ngIf="selectedSign"
                                [src]="'assets/zodiac/' + selectedSign + '.png'"
                                [class]="isSquareLayout ? 'w-20 h-20' : 'w-12 h-12'"
                                class="relative z-10"
                            >
                        </div>

                        <div
                            class="flex flex-col gap-2"
                            [class.w-full]="isSquareLayout"
                        >
                           
                        </div>
                        <p>{{ zodiacInfo()?.overview }}</p>
                    </div>
                </ng-template>
            </div>

            <!-- Enhanced bottom section -->
            <div
                *ngIf="hasZodiacInfo"
                [class.mt-4]="isSquareLayout"
                [ngClass]="isDarkMode ? 'border-white/5' : 'border-slate-200'"
                class="border-t border-white/5 pt-4"
            >
                <p class="text-white/80 text-sm line-clamp-2 italic">
                    Một chuỗi thành công sắp bắt đầu trong cuộc sống của bạn, và bây giờ là lúc để xây dựng...
                </p>

                <div class="flex items-center justify-between pt-2">
                    <div class="flex gap-3">
                        <button class="text-white/70 hover:text-white hover:bg-white/10 rounded-full p-1.5 transition-all duration-300">
                            <lucide-icon
                                name="share"
                                class="w-5 h-5"
                            ></lucide-icon>
                        </button>
                        <button class="text-white/70 hover:text-white hover:bg-white/10 rounded-full p-1.5 transition-all duration-300">
                            <lucide-icon
                                name="heart"
                                class="w-5 h-5"
                            ></lucide-icon>
                        </button>
                    </div>
                    <button
                        (click)="openZodiacSelector()"
                        class="text-indigo-400 hover:text-indigo-300 text-sm font-medium hover:bg-white/5 px-3 py-1 rounded-full transition-all duration-300"
                    >
                        Xem Thêm
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
